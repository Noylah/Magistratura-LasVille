<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Portale Magistratura</title>
    <link rel="stylesheet" href="style.css">
    <!-- Icone fornite dall'ambiente Canvas -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- LIBRERIA SUPABASE: Potrebbe servire per dati in tempo reale o funzionalità future -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- ⚠️ AUTH GUARD: Deve essere caricato per PRIMO per bloccare l'accesso non autorizzato -->
    <script src="authGuard.js"></script> 

</head>
<body class="dashboard-page">
    <div class="layout-container">
        
        <!-- SIDEBAR (Barra di Navigazione) -->
        <aside class="sidebar">
            <div class="logo-section">
                <span class="icon">⚖️</span> 
                <span class="logo-text">Magistratura</span>
                <p style="font-size: 0.8rem; color: var(--text-secondary);">Portale Gestionale</p>
            </div>
            
            <h4 class="navigazione">NAVIGAZIONE</h4>
            <ul class="nav-list" id="main-navigation">
                <!-- Data-role: attributo usato da dashboard.js per nascondere le voci in base al ruolo -->
                <li data-role="all"><a href="#" class="active"><span class="nav-icon fas fa-home"></span>Dashboard</a></li>
                <li data-role="Procuratore Generale,Admin"><a href="#"><span class="nav-icon fas fa-users"></span>Gestione Utenti</a></li>
                <li data-role="all"><a href="#"><span class="nav-icon fas fa-archive"></span>Archivi</a></li>
                <li data-role="all"><a href="#"><span class="nav-icon fas fa-gavel"></span>Tribunali</a></li>
                <li data-role="all"><a href="#"><span class="nav-icon fas fa-calendar-alt"></span>Calendario</a></li>
                <li data-role="Procuratore Generale,Admin"><a href="#"><span class="nav-icon fas fa-cog"></span>Impostazioni</a></li>
            </ul>
        </aside>

        <!-- MAIN CONTENT (Contenuto Principale e Header) -->
        <main class="main-content">
            
            <!-- TOP HEADER -->
            <header class="top-header">
                <span style="color: var(--primary-color); font-weight: bold;" id="welcome-user-message">Caricamento...</span>
                <div class="header-right">
                    <div class="role-info">
                        <span class="icon fas fa-user-tie"></span>
                        <!-- ID per visualizzare il ruolo dell'utente loggato -->
                        <span id="user-role-display">Ruolo Sconosciuto</span>
                    </div>
                    <button class="logout-button" id="logout-button"><span class="fas fa-sign-out-alt"></span> Esci</button>
                </div>
            </header>

            <!-- DASHBOARD AREA -->
            <div class="dashboard-area">
                <h1>Dashboard</h1>
                <p class="welcome-message">Benvenuto nel Portale Gestionale della Magistratura.</p>

                <!-- STATS GRID -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <span class="title">Utenti Totali</span>
                            <span class="icon fas fa-users"></span>
                        </div>
                        <div class="value">2,543</div>
                        <div class="change positive">+12% dal mese scorso</div>
                    </div>
                    <!-- Altre card statistiche... -->
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <span class="title">Procedimenti Archiviati</span>
                            <span class="icon fas fa-archive"></span>
                        </div>
                        <div class="value">45,231</div>
                        <div class="change positive">+234 questa settimana</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <span class="title">Efficienza Sistema</span>
                            <span class="icon fas fa-chart-line"></span>
                        </div>
                        <div class="value">98.5%</div>
                        <div class="change positive">+2.1% dal mese scorso</div>
                    </div>
                </div>

                <!-- NOTIFICHE RECENTI -->
                <div class="notifications-section">
                    <h2>Notifiche Recenti</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">Ultimi aggiornamenti del sistema</p>
                    <div class="notification-list">
                        <div class="notification-item">
                            <span class="notification-dot"></span>
                            <div>
                                **Nuovo procedimento assegnato**<span class="notification-time">2 ore fa</span>
                            </div>
                        </div>
                        <div class="notification-item">
                            <span class="notification-dot"></span>
                            <div>
                                **Documento archiviato con successo**<span class="notification-time">5 ore fa</span>
                            </div>
                        </div>
                        <div class="notification-item">
                            <span class="notification-dot"></span>
                            <div>
                                **Riunione del Consiglio Giudiziario**<span class="notification-time">1 giorno fa</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>
    
    <!-- SCRIPT PRINCIPALE: Contiene la logica per mostrare il ruolo e il logout -->
    <script src="dashboard.js"></script>
</body>
</html>
